# Примерный протокол обмена сообщениями #

По возможности следует использовать протокол UDP. Для удобства работы предусмотрена "библиотека" `dconnect.h`.

**Обозначения:**
* Клиент &mdash; программа-клиент (Doom_client)
* Сервер &mdash; программа-сервер (Doom_server)


* Пакет с кодом `i` &mdash; массив данных (`void*`), в начале которого находится элемент типа `int8_t` со значением `i`. Код `i` должен принимать только следующие значения:
	* `0`: *Обычный* пакет
	* `1`: *Специальный* или *Служебный* пакет
	* `2`: *Пакет связи* (используется только функциями библиотеки `dconnect.h`)

* Отправить пакет (без уточнения) &mdash; отправить пакет, используя функцию `d_all_sendraw()` со параметром `repeats = NET_USUAL_REPEAT`

* j-й байт в пакете &mdash; отсчёт числа байт начинается с 0.



## Соединение ##

### `d_client_connect()` ###

Связывает клиент и сервер, обновляя данные друг о друге на каждой стороне.

Клиент отправляет Пакет связи на данный IP Сервера стандартное число раз. Структура байт:
* 1й: `int8_t = 1`
* 2й: `int8_t = 0`

Сервер, приняв пакет функцией `d_server_get`, в случае успешного подключения отправляет **один раз** Пакет связи на IP Клиента с байтами:
* 1й: `int8_t = 1`
* 2й: `int8_t = 1`

Если серверу уже известен этот клиент, его ответ не меняется.

В случае ошибки:
* 1й: `int8_t = 1`
* 2й: `int8_t = -1`


Если пакет принял не сервер, никакого ответа не следует.
